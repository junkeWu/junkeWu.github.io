<!DOCTYPE html>
<html lang="en" color-mode="light">

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="keywords" content="" />
  <meta name="author" content="Junke Wu" />
  <meta name="description" content="坚持持续学习..." />
  
  
  <title>
    
      mysql面试题 
      
      
      |
    
     主页
  </title>

  
    <link rel="apple-touch-icon" href="/images/favicon.png">
    <link rel="icon" href="/images/favicon.png">
  

  <!-- Raleway-Font -->
  <link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet">

  <!-- hexo site css -->
  
<link rel="stylesheet" href="/css/color-scheme.css">
<link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="//at.alicdn.com/t/font_1886449_67xjft27j1l.css">
<link rel="stylesheet" href="/css/github-markdown.css">
<link rel="stylesheet" href="/css/highlight.css">
<link rel="stylesheet" href="/css/comments.css">

  <!-- 代码块风格 -->
  

  <!-- jquery3.3.1 -->
  <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

  <!-- fancybox -->
  <link href="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.css" rel="stylesheet">
  <script async src="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  
<script src="/js/fancybox.js"></script>


  

  <script>
    var html = document.documentElement
    const colorMode = localStorage.getItem('color-mode')
    if (colorMode) {
      document.documentElement.setAttribute('color-mode', colorMode)
    }
  </script>

  <!-- clipboard -->
  
    <script src="https://unpkg.com/clipboard@2/dist/clipboard.min.js"></script>
    
<script src="/js/codeCopy.js"></script>

  

<meta name="generator" content="Hexo 6.2.0"></head>


  <body>
    <div id="app">
      <div class="header">
  <div class="avatar">
    <a href="/">
      <!-- 头像取消懒加载，添加no-lazy -->
      
        <img src="/images/avatar.png" alt="">
      
    </a>
    <div class="nickname"><a href="/">junke Wu</a></div>
  </div>
  <div class="navbar">
    <ul>
      
        <li class="nav-item" data-path="/">
          <a href="/">Home</a>
        </li>
      
        <li class="nav-item" data-path="/archives/">
          <a href="/archives/">Archives</a>
        </li>
      
        <li class="nav-item" data-path="/tags/">
          <a href="/tags/">Tags</a>
        </li>
      
        <li class="nav-item" data-path="/friends/">
          <a href="/friends/">Friends</a>
        </li>
      
        <li class="nav-item" data-path="/about/">
          <a href="/about/">About</a>
        </li>
      
    </ul>
  </div>
</div>


<script src="/js/activeNav.js"></script>



      <div class="flex-container">
        <!-- 文章详情页，展示文章具体内容，url形式：https://yoursite/文章标题/ -->
<!-- 同时为「标签tag」，「朋友friend」，「分类categories」，「关于about」页面的承载页面，具体展示取决于page.type -->

<!-- LaTex Display -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
  }
};
</script>



  

  

  

  
  <!-- 文章内容页 url形式：https://yoursite/文章标题/ -->
  <div class="container post-details" id="post-details">
    <div class="post-content">
      <div class="post-title">mysql面试题</div>
      <div class="post-attach">
        <span class="post-pubtime">
          <i class="iconfont icon-updatetime" title="Update time"></i>
          2022-06-27 20:52:30
        </span>
        
              <span class="post-tags">
                <i class="iconfont icon-tags" title="Tags"></i>
                
                <span class="span--tag">
                  <a href="/tags/mysql/" title="mysql">
                    <b>#</b> mysql
                  </a>
                </span>
                
              </span>
          
      </div>
      <div class="markdown-body">
        <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><h5 id="一、数据库基础知识"><a href="#一、数据库基础知识" class="headerlink" title="一、数据库基础知识"></a>一、数据库基础知识</h5><ul>
<li>平时MySQL主要用哪个版本</li>
<li>数据库三大范式是什么</li>
<li>MySQL有关权限的表都有哪几个</li>
<li>MySQL的binlog有哪几种录入格式？分别有什么区别？</li>
<li>平时用到哪些关系型数据库和非关系型数据库，可以谈谈对它们的理解？</li>
<li>可以简单说说你对MySQL的逻辑架构了解？</li>
<li>了解MySQL中的MVCC是什么？</li>
<li>PostgreSQL相对于MySQL的优势</li>
<li>PostgreSQL和MySQL的一些区别</li>
</ul>
<h5 id="二、索引"><a href="#二、索引" class="headerlink" title="二、索引"></a>二、索引</h5><ul>
<li>索引有哪些使用场景</li>
<li>索引的数据结构（B+树、hash）</li>
<li>常见索引的原则是什么？</li>
<li>使用索引查询一定能提高查询的性能？为什么？</li>
<li>索引有哪些缺点</li>
<li>讲一讲聚簇索引与非聚簇索引？</li>
<li>百万级或以上数据如何删除？</li>
<li>什么是最左前缀原则？什么是最左匹配原则？</li>
<li>数据库为什么不用B树而是用B+树</li>
<li>非聚簇索引一定会回表查询？</li>
</ul>
<p>三、存储引擎</p>
<ul>
<li>概要</li>
<li>可以简单谈谈MySQL存储引擎MyISAM和Innodb的区别？</li>
<li>MyISAM索引和Innodb索引的区别？</li>
<li>Innodb引擎的4大特征</li>
</ul>
<h5 id="四、MySQL事务"><a href="#四、MySQL事务" class="headerlink" title="四、MySQL事务"></a>四、MySQL事务</h5><ul>
<li>什么是数据库事务</li>
<li>事务的四大特征ACID介绍一下？</li>
<li>什么是脏读、幻读、不可重复读？</li>
<li>什么是事务的隔离级别？MySQL的默认隔离级别是什么？</li>
<li>隔离级别的实现原理？</li>
<li>事务延伸点：什么是分布式事务？有哪些解决方案？</li>
</ul>
<h5 id="五、MySQL数据库读写锁"><a href="#五、MySQL数据库读写锁" class="headerlink" title="五、MySQL数据库读写锁"></a>五、MySQL数据库读写锁</h5><ul>
<li>概要</li>
<li>谈一谈MySQL的读写锁</li>
<li>隔离级别与锁的关系</li>
<li>按照锁的粒度分数据库锁有哪些？锁机制与Innodb锁算法</li>
<li>从锁的类别上分MySQL都有哪些锁？</li>
<li>MySQL中的Innodb引擎的行锁是怎么实现的？</li>
<li>Innodb存储引擎的锁的算法有三种？</li>
<li>什么是死锁</li>
<li>常见的解决死锁的方法</li>
<li>数据的乐观锁和悲观锁是什么？怎么实现？</li>
</ul>
<h5 id="六、MySQL视图"><a href="#六、MySQL视图" class="headerlink" title="六、MySQL视图"></a>六、MySQL视图</h5><ul>
<li>概要</li>
<li>为什么要使用视图</li>
<li>视图有哪些特点</li>
<li>视图的使用场景有哪些？</li>
<li>视图的优点</li>
<li>视图的缺点</li>
<li>存储过程与函数</li>
</ul>
<h5 id="七、MySQL触发器"><a href="#七、MySQL触发器" class="headerlink" title="七、MySQL触发器"></a>七、MySQL触发器</h5><ul>
<li>概要</li>
<li>什么是触发器？触发器的使用场景？</li>
<li>MySQL中都有哪些触发器</li>
</ul>
<h5 id="八、数据库优化"><a href="#八、数据库优化" class="headerlink" title="八、数据库优化"></a>八、数据库优化</h5><ul>
<li>概要</li>
<li>为什么要优化数据库</li>
<li>数据库结构优化</li>
<li>MySQL数据库cpu飙升到500%的话，应该怎么处理？</li>
<li>大表怎么优化？某个表有近千万数据，CRUD比较慢，如果优化？</li>
<li>垂直分表的适用场景和优缺点？</li>
<li>MySQL的复制原理以及流程</li>
<li>读写分离有哪些解决方案？</li>
</ul>
<h5 id="九、MySQL部署和运维"><a href="#九、MySQL部署和运维" class="headerlink" title="九、MySQL部署和运维"></a>九、MySQL部署和运维</h5><ul>
<li>概要</li>
<li>如何给一个大表建索引</li>
<li>如何批量删除N行记录，有什么注意事项</li>
<li>如何删除表</li>
<li>MySQL如何扩容</li>
<li>如何排查因为MySQL导致的CPU占用高的问题</li>
<li>MYSQL数据库磁盘IO使用高，请问如何进行排查</li>
<li>如何批量插入大量数据</li>
<li>数据备份与回复</li>
</ul>
<h3 id="前言-1"><a href="#前言-1" class="headerlink" title="前言"></a>前言</h3><p>一般来讲在面试当中，关于数据库相关的面试题频率出现比较高的几个关键词是<strong>SQL优化、索引、存储引擎、事务、死锁、乐观锁、悲观锁、关系型数据库和非关系型数据库</strong>对比等等。</p>
<p>如果你线上运维经验, 一般也会问一些比如数据库扩容, 如何给大表加索引, 如何在业务高峰是给一个大表添加字段等。</p>
<h5 id="一、数据库基础知识-1"><a href="#一、数据库基础知识-1" class="headerlink" title="一、数据库基础知识"></a>一、数据库基础知识</h5><ul>
<li><p>平时MySQL主要用哪个版本</p>
<ul>
<li><p>可以说说自己用的MySQL版本, 比如我自己用的版本是5.7版本，然后可以也简单聊聊这个版本的一些特点:</p>
<ul>
<li><p>安全性</p>
<ul>
<li><p>在MySQL 5.7中，有不少安全性相关的改进。包括：</p>
<p>MySQL数据库初始化完成以后，会产生一个 root@localhost 用户，从MySQL 5.7开始，root用户的密码不再是空，而是随机产生一个密码，这也导致了用户安装5.7时发现的与5.6版本比较大的一个不同点。</p>
<p>MySQL官方已经删除了test数据库，默认安装完后是没有test数据库的，就算用户创建了test库，也可以对test库进行权限控制了<br>MySQL 5.7版本提供了更为简单SSL安全访问配置，并且默认连接就采用SSL的加密方式。</p>
</li>
</ul>
</li>
<li><p>灵活性</p>
<ul>
<li>MySQL 5.7的两个全新的功能，即JSON和generate column<ul>
<li>CREATE TABLE t1 (jdoc JSON); </li>
<li>INSERT INTO t1 VALUES(‘{“key1”: “value1”, “key2”: “value2”}’);</li>
</ul>
</li>
</ul>
</li>
<li><p>可用性</p>
<ul>
<li>在线设置复制的过滤规则，不再需要重启MySQL，只需要停止SQL thread，修改完成以后，启动SQL thread</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>数据库三大范式是什么</p>
<ul>
<li>每个列不可再拆分</li>
<li>在第一范式的基础上，非主键列完全依赖主键列，而不能是依赖主键的一部分。</li>
<li>在第二范式的基础上，非主键列只依赖于主键，不依赖其他非主键。</li>
</ul>
</li>
<li><p>MySQL有关权限的表都有哪几个</p>
<ul>
<li>MySQL服务器通过权限表来控制用户对数据库的访问，权限表存放在mysql数据库里，由mysql_install_db脚本初始化。这些权限表分别<code>user</code>，<code>db</code>，<code>table_priv</code>，<code>columns_priv</code>和<code>host</code>。下面分别介绍一下这些表的结构和内容：<ul>
<li>user权限表：记录允许连接到服务器的用户帐号信息，里面的权限是全局级的。</li>
<li>db权限表：记录各个帐号在各个数据库上的操作权限。</li>
<li>table_priv权限表：记录数据表级的操作权限。</li>
<li>columns_priv权限表：记录数据列级的操作权限。</li>
<li>host权限表：配合db权限表对给定主机上数据库级操作权限作更细致的控制。这个权限表不受GRANT和REVOKE语句的影响。</li>
</ul>
</li>
</ul>
</li>
<li><p>MySQL的binlog有哪几种录入格式？分别有什么区别？</p>
<ul>
<li>Row :  不记录sql语句上下文相关信息，仅保留哪条记录被修改了。记录单元为每一行的改动，基本是可以全部记下来但是由于很多操作，会导致大量行的改动（比如alter table），因此这种模式的文件保存的信息太多，日志量太大。</li>
<li>Statement: 每一条会修改数据的sql都会在binlog中。不需要记录每一行的变化，减少了binlog的日志量，节约了IO，提高性能。由于sql的执行是有上下文的，因此在保存的时候需要保存相关的信息，同时还有一些使用了函数之类的语句无法被记录复制。</li>
<li>Mixed : 一种折中的方案，普通操作使用statement记录，当无法使用statement的时候使用row。</li>
</ul>
<p>此外，新版的MySQL中对row级别也做了一些优化，当表结构发生变化的时候，会记录语句而不是逐行记录。</p>
</li>
<li><p>平时用到哪些关系型数据库和非关系型数据库，可以谈谈对它们的理解？</p>
<p>mysql、postgresql     关系型        redis、mongodb        非关系型</p>
<ul>
<li>事务方面<ul>
<li>mysql：关系型数据库的最大特点就是事务的一致性, 所以对于订单模型等 对一致性要求比较高的还是建议用MySQL。</li>
<li>redis：没有mysql中的完善，只保证了一致性和隔离性，不满足原子性和持久性。</li>
</ul>
</li>
<li>关系型数据库的最大一个特点就是schema，固定的表结构。<ul>
<li>其实在业务模型中, 表结构固定反而是一件好事, 没有约束的模型 更容易出问题。</li>
</ul>
</li>
<li>复杂SQL、多表关联查询<ul>
<li>NoSql是不支持JOIN 这种查询的、redis也不支持复杂计算</li>
</ul>
</li>
<li>索引方式<ul>
<li>关系型数据库：B树、哈希等</li>
<li>非关系数据库：键值索引、跳表</li>
</ul>
</li>
<li>并发支持<ul>
<li>关系型数据库：通过事务和锁来支持并发，高并发情况下，执行效率较低。</li>
<li>单线程来支持并发安全。</li>
</ul>
</li>
</ul>
</li>
<li><p>可以简单说说你对MySQL的逻辑架构了解？</p>
<ul>
<li>第一层是服务器层，主要提供连接处理、授权认证、安全等功能。</li>
<li>第二层实现了 MySQL 核心服务功能，包括查询解析、分析、优化、缓存以及日期和时间等所有内置函数，所有跨存储引擎的功能都在这一层实现，例如存储过程、触发器、视图等</li>
<li>第三层是存储引擎层，存储引擎负责 MySQL 中数据的存储和提取。服务器通过 API 与存储引擎通信，这些接口屏蔽了不同存储引擎的差异，使得差异对上层查询过程透明。除了会解析外键定义的 InnoDB 外，存储引擎不会解析 SQL，不同存储引擎之间也不会相互通信，只是简单响应上层服务器请求。</li>
</ul>
</li>
<li><p>了解MySQL中的MVCC是什么？</p>
<ul>
<li>MYSQL有个read view是进行多版本控制的，它和undolog 快照，一起构成了可见规则。</li>
<li>MVCC是多版本并发控制，在很多情况下避免加锁，大都实现非阻塞的读操作，写操作也只锁定必要的行。</li>
<li>InnoDB的MVCC通过在每行记录后面保存俩个隐藏的列来实现，这俩个列一个保存了行的创建时间，一个保存行的过期时间。不过存储的不是实际的时间值，而是版本号，每开始一个新的事务，系统版本号都会自动递增，事务开始时刻的系统版本号会作为事务的版本号，用来和查询到的没行记录的版本号进行比较。</li>
<li>MVCC 只能在 READ COMMITTED 和 REPEATABLE READ 两个隔离级别下工作，因为 READ UNCOMMITTED 总是读取最新的数据行，而不是符合当前事务版本的数据行，而 SERIALIZABLE 则会对所有读取的行都加锁。</li>
</ul>
</li>
<li><p>PostgreSQL相对于MySQL的优势</p>
<ul>
<li>在SQL的标准实现上要比MySQL完善，而且功能实现比较严谨；</li>
<li>存储过程的功能支持要比MySQL好，具备本地缓存执行计划的能力；</li>
<li>对表连接支持较完整，优化器的功能较完整，支持的索引类型很多，复杂查询能力较强；</li>
<li>PG主表采用堆表存放，MySQL采用索引组织表，能够支持比MySQL更大的数据量。</li>
<li>PG的主备复制属于物理复制，相对于MySQL基于binlog的逻辑复制，数据的一致性更加可靠，复制性能更高，对主机性能的影响也更小。</li>
</ul>
</li>
<li><p>PostgreSQL和MySQL的一些区别</p>
<ul>
<li><p>MySQL不支持地理数据类型。</p>
</li>
<li><p>从9.2开始，PG支持json数据类型。相对于MySQL来说，PG对json的支持比较先进。他有一些json指定的操作符和函数，是的搜索json文本非常高效。9.4开始，可以以二进制的格式存储json数据，支持在该列上进行全文索引（GIN索引），从而在json文档中进行快速搜索。</p>
<p>从5.7开始，MySQL支持json数据类型，比PG晚。也可以在json列上建立索引。然而对json相关的函数的支持比较有限。不支持在json列上全文索引。由于MySQL对SQL支持的限制，在存储和处理json数据方面，MySQL不是一个很好的选择。</p>
</li>
</ul>
</li>
</ul>
<h5 id="二、索引-1"><a href="#二、索引-1" class="headerlink" title="二、索引"></a>二、索引</h5><ul>
<li><p>索引有哪些使用场景</p>
<ul>
<li>主键应该创建主键索引。</li>
<li>频繁作为查询条件的字段应该创建索引。</li>
<li>查询中需要与其他表进行关联的字段应该创建索引。</li>
<li>需要排序的字段应该创建索引。</li>
<li>需要统计或分组的字段应该创建索引。</li>
<li>优先考虑创建复合索引</li>
</ul>
</li>
<li><p>不需要建索引的场景</p>
<ul>
<li>数据记录较少的表</li>
<li>经常需要增删改查操作的字段。</li>
<li>数据记录重复较多且分布平均的字段（如性别，状态等）</li>
</ul>
<p>索引的选择性是指索引列中不同值的数目与表中记录总数的比。<br>索引的选择性越接近于1，创建索引的价值就越高。反之就越低。</p>
</li>
<li><p>索引的数据结构（B+树、hash）</p>
<ul>
<li>从存储结构上来划分：BTree索引（B-Tree或B+Tree索引），Hash索引，full-index全文索引，R-Tree索引。这里所描述的是索引存储时保存的形式，MySQL默认采用的B+Tree， 这里主要讲讲B+树的特点:<ul>
<li>非叶子节点不存储data，只存储索引(冗余)，可以放更多的索引</li>
<li>叶子节点包含所有索引字段</li>
<li>叶子节点用指针连接，提高区间访问的性能 （快速定位范围查询，例如查询大于20，第一次io从根节点查询三次定位到20，然后通过后面的指针查询大于20的数据，就不用再从根节点的重新再查询，提高性能，叶子节点开始结束节点也是用指针连接串起来的）</li>
</ul>
</li>
</ul>
<p><img src="/../images/mysql01.png" alt="mysql01"></p>
</li>
<li><p>常见索引的原则是什么？</p>
<ul>
<li>选择唯一性索引</li>
<li>为经常需要排序、分组和联合操作的字段建立索引</li>
<li>为常作为查询条件的字段建立索引</li>
<li>限制索引的数目<ul>
<li>索引的数目不是越多越好。每个索引都需要占用磁盘空间，索引越多，需要的磁盘空间就越大。修改表时，对索引的重构和更新很麻烦。越多的索引，会使更新表变得很浪费时间。</li>
</ul>
</li>
<li>尽量使用数据量少的索引<ul>
<li>如果索引的值很长，那么查询的速度会受到影响。例如，对一个CHAR(100)类型的字段进行全文检索需要的时间肯定要比对CHAR(10)类型的字段需要的时间要多。</li>
</ul>
</li>
<li>尽量使用前缀来索引<ul>
<li>如果索引字段的值很长，最好使用值的前缀来索引。例如，TEXT和BLOG类型的字段，进行全文检索会很浪费时间。如果只检索字段的前面的若干个字符，这样可以提高检索速度。</li>
</ul>
</li>
<li>最左前缀匹配原则</li>
<li>查询时使用计算，会导致索引失效</li>
</ul>
</li>
<li><h2 id="使用索引查询一定能提高查询的性能？为什么？"><a href="#使用索引查询一定能提高查询的性能？为什么？" class="headerlink" title="使用索引查询一定能提高查询的性能？为什么？"></a>使用索引查询一定能提高查询的性能？为什么？</h2></li>
<li><p>索引有哪些缺点</p>
</li>
<li><p>讲一讲聚簇索引与非聚簇索引？</p>
</li>
<li><p>百万级或以上数据如何删除？</p>
</li>
<li><p>什么是最左前缀原则？什么是最左匹配原则？</p>
</li>
<li><p>数据库为什么不用B树而是用B+树</p>
</li>
<li><p>非聚簇索引一定会回表查询？</p>
</li>
</ul>
<p>三、存储引擎</p>
<ul>
<li>概要</li>
<li>可以简单谈谈MySQL存储引擎MyISAMheInnodb的区别？</li>
<li>MyISAM索引和Innodb索引的区别？</li>
<li>Innodb引擎的4大特征</li>
</ul>
<h5 id="四、MySQL事务-1"><a href="#四、MySQL事务-1" class="headerlink" title="四、MySQL事务"></a>四、MySQL事务</h5><ul>
<li>概要</li>
<li>什么是数据库事务</li>
<li>事务的四大特征ACID介绍一下？</li>
<li>什么是脏读、幻读、不可重复读？</li>
<li>什么是事务的隔离级别？MySQL的默认隔离级别是什么？</li>
<li>隔离级别的实现原理？</li>
<li>事务延伸点：什么是分布式事务？有哪些解决方案？</li>
</ul>
<h5 id="五、MySQL数据库读写锁-1"><a href="#五、MySQL数据库读写锁-1" class="headerlink" title="五、MySQL数据库读写锁"></a>五、MySQL数据库读写锁</h5><ul>
<li>概要</li>
<li>谈一谈MySQL的读写锁</li>
<li>隔离级别与锁的关系</li>
<li>按照锁的粒度分数据库锁有哪些？锁机制与Innodb锁算法</li>
<li>从锁的类别上分MySQL都有哪些锁？</li>
<li>MySQL中的Innodb引擎的行锁是怎么实现的？</li>
<li>Innodb存储引擎的锁的算法有三种？</li>
<li>什么是死锁</li>
<li>常见的解决死锁的方法</li>
<li>数据的乐观锁和悲观锁是什么？怎么实现？</li>
</ul>
<h5 id="六、MySQL视图-1"><a href="#六、MySQL视图-1" class="headerlink" title="六、MySQL视图"></a>六、MySQL视图</h5><ul>
<li>概要</li>
<li>为什么要使用视图</li>
<li>视图有哪些特点</li>
<li>视图的使用场景有哪些？</li>
<li>视图的优点</li>
<li>视图的缺点</li>
<li>存储过程与函数</li>
</ul>
<h5 id="七、MySQL触发器-1"><a href="#七、MySQL触发器-1" class="headerlink" title="七、MySQL触发器"></a>七、MySQL触发器</h5><ul>
<li>概要</li>
<li>什么是触发器？触发器的使用场景？</li>
<li>MySQL中都有哪些触发器</li>
</ul>
<h5 id="八、数据库优化-1"><a href="#八、数据库优化-1" class="headerlink" title="八、数据库优化"></a>八、数据库优化</h5><ul>
<li>概要</li>
<li>为什么要优化数据库</li>
<li>数据库结构优化</li>
<li>MySQL数据库cpu飙升到500%的话，应该怎么处理？</li>
<li>大表怎么优化？某个表有近千万数据，CRUD比较慢，如果优化？</li>
<li>垂直分表的适用场景和优缺点？</li>
<li>MySQL的复制原理以及流程</li>
<li>读写分离有哪些解决方案？</li>
</ul>
<h5 id="九、MySQL部署和运维-1"><a href="#九、MySQL部署和运维-1" class="headerlink" title="九、MySQL部署和运维"></a>九、MySQL部署和运维</h5><ul>
<li>概要</li>
<li>如何给一个大表建索引</li>
<li>如何批量删除N行记录，有什么注意事项</li>
<li>如何删除表</li>
<li>MySQL如何扩容</li>
<li>如何排查因为MySQL导致的CPU占用高的问题</li>
<li>MYSQL数据库磁盘IO使用高，请问如何进行排查</li>
<li>如何批量插入大量数据</li>
<li>数据备份与回复</li>
</ul>

      </div>
      
        <div class="prev-or-next">
          <div class="post-foot-next">
            
              <a href="/2022/06/15/RabbitMQ/" target="_self">
                <i class="iconfont icon-chevronleft"></i>
                <span>Prev</span>
              </a>
            
          </div>
          <div class="post-attach">
            <span class="post-pubtime">
              <i class="iconfont icon-updatetime" title="Update time"></i>
              2022-06-27 20:52:30
            </span>
            
                  <span class="post-tags">
                    <i class="iconfont icon-tags" title="Tags"></i>
                    
                    <span class="span--tag">
                      <a href="/tags/mysql/" title="mysql">
                        <b>#</b> mysql
                      </a>
                    </span>
                    
                  </span>
              
          </div>
          <div class="post-foot-prev">
            
              <a href="/2022/07/11/Open_IM-Server/" target="_self">
                <span>Next</span>
                <i class="iconfont icon-chevronright"></i>
              </a>
            
          </div>
        </div>
      
    </div>
    
  <div id="btn-catalog" class="btn-catalog">
    <i class="iconfont icon-catalog"></i>
  </div>
  <div class="post-catalog hidden" id="catalog">
    <div class="title">Contents</div>
    <div class="catalog-content">
      
        <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-text">一、数据库基础知识</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%B4%A2%E5%BC%95"><span class="toc-text">二、索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9B%9B%E3%80%81MySQL%E4%BA%8B%E5%8A%A1"><span class="toc-text">四、MySQL事务</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%94%E3%80%81MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%BB%E5%86%99%E9%94%81"><span class="toc-text">五、MySQL数据库读写锁</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%AD%E3%80%81MySQL%E8%A7%86%E5%9B%BE"><span class="toc-text">六、MySQL视图</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%83%E3%80%81MySQL%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-text">七、MySQL触发器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96"><span class="toc-text">八、数据库优化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B9%9D%E3%80%81MySQL%E9%83%A8%E7%BD%B2%E5%92%8C%E8%BF%90%E7%BB%B4"><span class="toc-text">九、MySQL部署和运维</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E8%A8%80-1"><span class="toc-text">前言</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-1"><span class="toc-text">一、数据库基础知识</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%B4%A2%E5%BC%95-1"><span class="toc-text">二、索引</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95%E6%9F%A5%E8%AF%A2%E4%B8%80%E5%AE%9A%E8%83%BD%E6%8F%90%E9%AB%98%E6%9F%A5%E8%AF%A2%E7%9A%84%E6%80%A7%E8%83%BD%EF%BC%9F%E4%B8%BA%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-text">使用索引查询一定能提高查询的性能？为什么？</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9B%9B%E3%80%81MySQL%E4%BA%8B%E5%8A%A1-1"><span class="toc-text">四、MySQL事务</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%94%E3%80%81MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%BB%E5%86%99%E9%94%81-1"><span class="toc-text">五、MySQL数据库读写锁</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%AD%E3%80%81MySQL%E8%A7%86%E5%9B%BE-1"><span class="toc-text">六、MySQL视图</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%83%E3%80%81MySQL%E8%A7%A6%E5%8F%91%E5%99%A8-1"><span class="toc-text">七、MySQL触发器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96-1"><span class="toc-text">八、数据库优化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B9%9D%E3%80%81MySQL%E9%83%A8%E7%BD%B2%E5%92%8C%E8%BF%90%E7%BB%B4-1"><span class="toc-text">九、MySQL部署和运维</span></a></li></ol></li></ol></li></ol>
      
    </div>
  </div>

  
<script src="/js/catalog.js"></script>




    
      <div class="comments-container">
        







      </div>
    
  </div>


        
<div class="footer">
  <div class="social">
    <ul>
      
        <li>
          <a title="github" href="https://github.com/junkeWu">
            <i class="iconfont icon-github"></i>
          </a>
        </li>
      
        <li>
          <a title="email" href="">
            <i class="iconfont icon-envelope"></i>
          </a>
        </li>
      
    </ul>
  </div>
  
    
    <div class="footer-more">
      
        <a href="https://github.com/junkeWu">Copyright © 2022 junkeWu</a>
        
    </div>
  
    
    <div class="footer-more">
      
        <a href="https://github.com/zchengsite/hexo-theme-oranges">Theme by zchengsite | Powered by Hexo</a>
        
    </div>
  
</div>

      </div>

      <div class="tools-bar">
        <div class="back-to-top tools-bar-item hidden">
  <a href="javascript: void(0)">
    <i class="iconfont icon-chevronup"></i>
  </a>
</div>


<script src="/js/backtotop.js"></script>



        
  <div class="search-icon tools-bar-item" id="search-icon">
    <a href="javascript: void(0)">
      <i class="iconfont icon-search"></i>
    </a>
  </div>

  <div class="search-overlay hidden">
    <div class="search-content" tabindex="0">
      <div class="search-title">
        <span class="search-icon-input">
          <a href="javascript: void(0)">
            <i class="iconfont icon-search"></i>
          </a>
        </span>
        
          <input type="text" class="search-input" id="search-input" placeholder="Search...">
        
        <span class="search-close-icon" id="search-close-icon">
          <a href="javascript: void(0)">
            <i class="iconfont icon-close"></i>
          </a>
        </span>
      </div>
      <div class="search-result" id="search-result"></div>
    </div>
  </div>

  <script type="text/javascript">
    var inputArea = document.querySelector("#search-input")
    var searchOverlayArea = document.querySelector(".search-overlay")

    inputArea.onclick = function() {
      getSearchFile()
      this.onclick = null
    }

    inputArea.onkeydown = function() {
      if(event.keyCode == 13)
        return false
    }

    function openOrHideSearchContent() {
      let isHidden = searchOverlayArea.classList.contains('hidden')
      if (isHidden) {
        searchOverlayArea.classList.remove('hidden')
        document.body.classList.add('hidden')
        // inputArea.focus()
      } else {
        searchOverlayArea.classList.add('hidden')
        document.body.classList.remove('hidden')
      }
    }

    function blurSearchContent(e) {
      if (e.target === searchOverlayArea) {
        openOrHideSearchContent()
      }
    }

    document.querySelector("#search-icon").addEventListener("click", openOrHideSearchContent, false)
    document.querySelector("#search-close-icon").addEventListener("click", openOrHideSearchContent, false)
    searchOverlayArea.addEventListener("click", blurSearchContent, false)

    var searchFunc = function (path, search_id, content_id) {
      'use strict';
      var $input = document.getElementById(search_id);
      var $resultContent = document.getElementById(content_id);
      $resultContent.innerHTML = "<ul><span class='local-search-empty'>First search, index file loading, please wait...<span></ul>";
      $.ajax({
        // 0x01. load xml file
        url: path,
        dataType: "xml",
        success: function (xmlResponse) {
          // 0x02. parse xml file
          var datas = $("entry", xmlResponse).map(function () {
            return {
              title: $("title", this).text(),
              content: $("content", this).text(),
              url: $("url", this).text()
            };
          }).get();
          $resultContent.innerHTML = "";

          $input.addEventListener('input', function () {
            // 0x03. parse query to keywords list
            var str = '<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length <= 0) {
              return;
            }
            // 0x04. perform local searching
            datas.forEach(function (data) {
              var isMatch = true;
              var content_index = [];
              if (!data.title || data.title.trim() === '') {
                data.title = "Untitled";
              }
              var orig_data_title = data.title.trim();
              var data_title = orig_data_title.toLowerCase();
              var orig_data_content = data.content.trim().replace(/<[^>]+>/g, "");
              var data_content = orig_data_content.toLowerCase();
              var data_url = data.url;
              var index_title = -1;
              var index_content = -1;
              var first_occur = -1;
              // only match artiles with not empty contents
              if (data_content !== '') {
                keywords.forEach(function (keyword, i) {
                  index_title = data_title.indexOf(keyword);
                  index_content = data_content.indexOf(keyword);

                  if (index_title < 0 && index_content < 0) {
                    isMatch = false;
                  } else {
                    if (index_content < 0) {
                      index_content = 0;
                    }
                    if (i == 0) {
                      first_occur = index_content;
                    }
                    // content_index.push({index_content:index_content, keyword_len:keyword_len});
                  }
                });
              } else {
                isMatch = false;
              }
              // 0x05. show search results
              if (isMatch) {
                str += "<li><a href='" + data_url + "' class='search-result-title'>" + orig_data_title + "</a>";
                var content = orig_data_content;
                if (first_occur >= 0) {
                  // cut out 100 characters
                  var start = first_occur - 20;
                  var end = first_occur + 80;

                  if (start < 0) {
                    start = 0;
                  }

                  if (start == 0) {
                    end = 100;
                  }

                  if (end > content.length) {
                    end = content.length;
                  }

                  var match_content = content.substr(start, end);

                  // highlight all keywords
                  keywords.forEach(function (keyword) {
                    var regS = new RegExp(keyword, "gi");
                    match_content = match_content.replace(regS, "<span class=\"search-keyword\">" + keyword + "</span>");
                  });

                  str += "<p class=\"search-result-abstract\">" + match_content + "...</p>"
                }
                str += "</li>";
              }
            });
            str += "</ul>";
            if (str.indexOf('<li>') === -1) {
              return $resultContent.innerHTML = "<ul><span class='local-search-empty'>No result<span></ul>";
            }
            $resultContent.innerHTML = str;
          });
        },
        error: function(xhr, status, error) {
          $resultContent.innerHTML = ""
          if (xhr.status === 404) {
            $resultContent.innerHTML = "<ul><span class='local-search-empty'>The search.xml file was not found, please refer to：<a href='https://github.com/zchengsite/hexo-theme-oranges#configuration' target='_black'>configuration</a><span></ul>";
          } else {
            $resultContent.innerHTML = "<ul><span class='local-search-empty'>The request failed, Try to refresh the page or try again later.<span></ul>";
          }
        }
      });
      $(document).on('click', '#search-close-icon', function() {
        $('#search-input').val('');
        $('#search-result').html('');
      });
    }

    var getSearchFile = function() {
        var path = "/search.xml";
        searchFunc(path, 'search-input', 'search-result');
    }
  </script>




        
  <div class="tools-bar-item theme-icon" id="switch-color-scheme">
    <a href="javascript: void(0)">
      <i id="theme-icon" class="iconfont icon-moon"></i>
    </a>
  </div>

  
<script src="/js/colorscheme.js"></script>





        
  
    <div class="share-icon tools-bar-item">
      <a href="javascript: void(0)" id="share-icon">
        <i class="iconfont iconshare"></i>
      </a>
      <div class="share-content hidden">
        
          <a class="share-item" href="https://twitter.com/intent/tweet?text=' + mysql%E9%9D%A2%E8%AF%95%E9%A2%98 + '&url=' + http%3A%2F%2Fgithub.com%2F2022%2F06%2F27%2Fmysql%2F + '" target="_blank" title="Twitter">
            <i class="iconfont icon-twitter"></i>
          </a>
        
        
          <a class="share-item" href="https://www.facebook.com/sharer.php?u=http://github.com/2022/06/27/mysql/" target="_blank" title="Facebook">
            <i class="iconfont icon-facebooksquare"></i>
          </a>
        
      </div>
    </div>
  
  
<script src="/js/shares.js"></script>



      </div>
    </div>
  </body>
</html>
